<!DOCTYPE html>
<html>
{%load staticfiles%}
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>DealMonk | My Restaurant</title>

    <link href="{%static 'assets/css/bootstrap.min.css'%}" rel="stylesheet">
    <!-- <link href="{%static 'font-awesome/css/font-awesome.css'%}" rel="stylesheet"> -->
    <link href="{%static 'assets/css/animate.css'%}" rel="stylesheet">
    <link href="{%static 'assets/css/style.css'%}" rel="stylesheet">
	  <link rel="stylesheet" href="{%static 'assets/css/bootstrap-multiselect.css'%}" type="text/css"/>    
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="icon" 
      type="image/png" 
      href="{%static 'assets/img/imgo.jpg'%}" >

<style type="text/css">

.ibox-title h5 {
    margin: 10px 0 7px;    
}

.ibox-title {
padding-top: 1%;
}

.modal-body {
    max-height: calc(100vh - 210px);
    overflow-y: auto;
}

.modal-dialog1 {
  width: 100%;
  margin: 30px auto;
}

</style>

<style>
    .multiselect {
        width: 200px;
    }
    .selectBox {
        position: relative;
    }
    .selectBox select {
        width: 100%;
        #font-weight: bold;
    }
    .overSelect {
        position: absolute;
        left: 0; right: 0; top: 0; bottom: 0;
    }
    #checkboxes {
        display: none;
        border: 2px #dadada solid;
    }
    #checkboxes label {
        display: block;
    }
    #checkboxes label:hover {
        background-color:#f90;
    }
</style>

<style type="text/css">

.modal-dialog1 {
  width: 35%;
  margin: 30px auto;
}

.modal-dialog {
    width: 70%;
    margin: 30px auto;
}

.fa-s{
	float: right;
	padding: 1%;
}
.modal {
    top: 20%;
}
</style>

</head>

<body>

    <div id="wrapper">

    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav" id="side-menu">
                <li class="nav-header">
                    <div class="dropdown profile-element"> 
                    
                      <a data-toggle="dropdown" class="dropdown-toggle" href="#" style="background: rgba(2, 1, 1, 0) none repeat scroll 0% 0%;">
                    			<span>
                            	<img alt="image" id='user_img' class="img-circle" src="{{user_img}}" width=48 height=48/>
                            </span>
                     </a>
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="clear"> <span class="block m-t-xs"> <label class="font-bold" style="text-transform:capitalize;">{{request.session.full_name}}</label>
                             </span></span> </a>
<!--                         <ul class="dropdown-menu animated fadeInRight m-t-xs">
                            <li><a href="profile.html">Profile</a></li>
                            <li><a href="contacts.html">Contacts</a></li>
                            <li><a href="mailbox.html">Mailbox</a></li>
                            <li class="divider"></li>
                            <li><a href="/sign-out-admin/">Logout</a></li>
                        </ul> -->
                    </div>
                    <div class="logo-element">
                        DM+
                    </div>
                </li>
                <li>
                    <a href="/dashboard/"><i class="fa fa-th-large"></i> <span class="nav-label">Dashboard</span><span class="label label-primary pull-right">V.1</span></a>
                </li>
                <li>
                    <a href="/load-upcoming-guests/"><i class="fa fa-calendar"></i> <span class="nav-label">Upcoming Guests</span></a>
                </li>
                <li>
                    <a href="/promotions/"><i class="fa fa-diamond"></i> <span class="nav-label">Promotions</span> </a>
                </li>
                
                <li class="active">
                    <a href="/my-restaurantform/"><i class="fa fa-cutlery"></i> <span class="nav-label">My Restaurant </span></a>
                </li>
                <li>
                    <a href="/restaurant_menu/"><i class="fa fa-book"></i> <span class="nav-label">Menu</span></a>
                </li>
                 <li>
                    <a href="/open-change-password/"><i class="fa fa-cogs"></i> <span class="nav-label">Account Settings</span></a>
                </li>
                <!-- <li>
                    <a href="#"><i class="fa fa-users"></i> <span class="nav-label">Contact US</span></a>
                </li> -->
                <!-- <li>
                    <a href="#"><i class="fa fa-usd"></i> <span class="nav-label">Payment</span> </a>
                </li>
                 <li>
                    <a href="#"><i class="fa fa-envelope-o"></i> <span class="nav-label">Email</span></a>
                </li> 
                <li>
                    <a href="#"><i class="fa fa-desktop"></i> <span class="nav-label">Promote @DM</span></a>
                </li>
                <li>
                    <a href="#"><i class="fa fa-files-o"></i> <span class="nav-label">Redeem</a>
                </li> -->

        </div>
    </nav>

        <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom">
        <nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
            <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
        </div>
            <ul class="nav navbar-top-links navbar-right">
                <li>
                    <span class="m-r-sm text-muted welcome-message" style="text-transform:capitalize;">Welcome {{ request.session.full_name}}</span>
                </li>
                
                


                <li>
                    <a href="/sign-out-admin/">
                        <i class="fa fa-sign-out"></i> Log out
                    </a>
                </li>
                
            </ul>

        </nav>
        </div>
            <!-- <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-lg-10">
                    <h2>My Restaurant</h2>
                    
                    </div>
            </div> -->
            <div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-9">
       <h2>My Restaurant</h2>
    </div>
    <div class="col-lg-3" style="padding-top:20px;">
  <a href="/open-restaurant-branch/" type="submit" class="btn btn-primary btn-sm" style="margin-left:80px;">Add Restaurant Branch</a>

 
    </div> 
</div>
  <div class="wrapper wrapper-content animated fadeInRight">
           <div class="row">
                <div class="col-md-5">
           <div class="ibox float-e-margins">
               <div class="ibox-title">
                   <h5>Restaurant Details</h5>
                   
                   <div class="ibox-tools"> 
                   <a href="/edit-restaurant/" class="btn btn-warning" style="color:white;"> 
                   			<!-- <a data-toggle="modal" id="edit_rest" class="btn btn-warning" style="color:white;"> -->
                   			<i class="fa fa-pencil-square-o"></i>
                   			</a>                           
                        </div>
               </div>
               <div>
               
                 <div class="ibox-content no-padding border-left-right">
                                <img alt="image" class="img-responsive" src={{restaurant.restaurant_image}}>
                            </div>
                   
                    <div class="ibox-content profile-content">
                                      
                       <div class="ibox-content">
                                <h4>{{restaurant.restaurant_name}}</h4>
                                {% if restaurant.restaurant_addr2 == ''%}
                                <p><i class="fa fa-map-marker"></i> {{restaurant.restaurant_name}},<br> {{restaurant.restaurant_addr1}},<br> {{restaurant.restaurant_area}},<br> {{restaurant.restaurant_city}}</p>
                                {%else%}
                                <p><i class="fa fa-map-marker"></i> {{restaurant.restaurant_name}},<br> {{restaurant.restaurant_addr1}},<br> {{restaurant.restaurant_addr2}},<br> {{restaurant.restaurant_area}},<br> {{restaurant.restaurant_city}}</p>
                                {%endif%}
                                <h4>
                                    Cuisine Type
                                </h4>
                                <p id="cuisine_result">
                                    {{cuisine_result}}
                                </p>
                                  <p id="cuisine_result_id" hidden="hidden">
                                   {{cuisine_result_id}}
                                </p>
                                <h4>
                                    About Us<i class="icon-edit"></i>
                                </h4>
                                <p>
                                    {{restaurant.restaurant_description}}
                                </p>
                               
                                <h4>Hours of Operation</h4>
                                {% if restaurant.restaurant_opentime_day == restaurant.restaurant_closetime_day%}
										  <p>24 Hours Open!</p>                               
                                {% else %}
                                <p>Day: {{rest.restaurant_opentime_day}} - {{rest.restaurant_closetime_day}}  </p>
                                {% if rest.restaurant_opentime_eve == rest.restaurant_closetime_eve%}
                                <p>Evening: Closed</p>
                                {%else%}
                                <p>Evening: {{rest.restaurant_opentime_eve}} - {{rest.restaurant_closetime_eve}}</p>
                                {% endif %}
                                {% endif %}
                                <h4>Contact Number</h4>
                                <p>{{ restaurant.restaurant_contactno }}</p>
                            </div>
                      
                   </div> 
           </div>
       </div>
           </div>
            <div class="col-lg-7">
                <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Owner Details</h5>
                            <div class="ibox-tools">
                            <a data-toggle="modal" data-target="#edit_owner" class="btn btn-warning" style="color:white;">
                   			<i class="fa fa-pencil-square-o"></i>
                   			</a>
                           
                        </div>
                        </div>
                        
                        
<div class="ibox-content" style="padding-bottom: 37px;">
<div class="row">
                                <div class="col-lg-5">
                                    <!-- <dl class="dl-horizontal"> -->
{% if restaurant.restaurant_owner_firstname == ''%}
<dl>
 <dt><div class="font-bold">First Name:</div></dt><dd>Not Available</dd><br>
 <dt><div class="font-bold">Contact Number:</div></dt> <dd>Not Available</dd>
</dl>
                                </div>
                                <div class="col-lg-6" id="cluster_info">
                                    <dl>
 <dt><div class="font-bold">Last Name:</div></dt> <dd>Not Available</dd><br>
 <dt><div class="font-bold">Email ID:</div></dt><dd>Not Available</dd>                                    
                                    </dl>
<!-- <br>
<p>Data not available</p> -->
{% else %}
<dl>
 <dt><div class="font-bold">First Name:</div></dt><dd>{{restaurant.restaurant_owner_firstname}}</dd><br>
 <dt><div class="font-bold">Contact Number:</div></dt> <dd>{{restaurant.restaurant_owner_contact}}</dd>
</dl>
                                </div>
                                <div class="col-lg-6" id="cluster_info">
                                    <dl>
 <dt><div class="font-bold">Last Name:</div></dt> <dd>{{restaurant.restaurant_owner_lastname}}</dd><br>
 <dt><div class="font-bold">Email ID:</div></dt><dd>{{restaurant.restaurant_owner_email}}</dd>                                    
                                    </dl>
{%endif%}                                    
                                </div>
                            </div></div> 
  </div>
            </div>
            <div class="col-lg-7">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>Restaurant Branch Details</h5>
                        <div class="ibox-tools">
                        <a href="/edit-restaurant-branch/" class="btn btn-warning" style="color:white;">
                            <!-- <a id="branch_check" data-toggle="modal" data-target="#edit_restaurant_branch" class="btn btn-warning" style="color:white;"> -->
                   			<i class="fa fa-pencil-square-o"></i>
                   			</a>
                        </div>
                    </div>
                    <div class="ibox-content profile-content">							
                        <table class="table">
                            <thead>
                            <tr>
                                <th>#</th>
                                <th>Branch Name</th>
                                <th>City</th>
                                <th>Hours of Operation</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for branch in items %}
                            <tr>                            	
                                <td>{{branch.restaurant_branch_id}}</td>
                                <td>{{branch.restaurant_branch_name}}</td>
                                <td>{{branch.restaurant_branch_city}}</td>
                                {% if branch.restaurant_branch_opentime_day == branch.restaurant_branch_closetime_day%}
                                <td><p>24 Hours Open!</p></td>
                                {% else %}
                                <td><p>Day: {{branch.restaurant_branch_opentime_day}} - {{branch.restaurant_branch_closetime_day}}</p>
                                {% if branch.restaurant_branch_opentime_eve == branch.restaurant_branch_closetime_eve%}
                                <p>Evening: Closed</p>
                                {%else%}
                                <p>Evening: {{branch.restaurant_branch_opentime_eve}} - {{branch.restaurant_branch_closetime_eve}}</p></td>
                                {% endif %}
                                {% endif %}
                            </tr>
                            {% endfor %}                            
                            </tbody> 
                        </table>
				
                    </div>
                </div>
            </div>
            </div>
									<div class="modal fade" id="edit_owner" role="dialog">
    												<div class="modal-dialog1">

      											<!-- Modal content-->	
      											<div class="modal-content">
        											<div class="modal-header">
										          <button type="button" class="close" data-dismiss="modal">&times;</button>
          										<h4 class="modal-title">Restaurant Owner Details</h4>
        											</div>
        											<div class="modal-body">
        											<form action="/update_owner_details/" method="post">
          											<div class="ibox">
											     <div class="ibox-title">
											                        <h5>Restaurant Owner</h5>
											                        <div class="ibox-tools">
											                            <a class="close-link">
											                                <i class="fa fa-times"></i>
											                            </a>
											                        </div>
											                    </div>
						          <div class="ibox-content" style="padding-bottom: 59px;">
						            <input type="hidden" name="rest_id" value={{restaurant.restaurant_id}}>
						               <div class="form-group"><label class="control-label">First Name</label>
						              <input value="{{restaurant.restaurant_owner_firstname}}" name="owner_fname" type="text" placeholder="First Name" class="form-control" title="Only letters allowed">             
						               </div>
						               <div class="form-group"><label>Last Name</label>
						                <input value="{{restaurant.restaurant_owner_lastname}}" name="owner_lname" type="text" placeholder="Last Name" class="form-control" title="Only letters allowed">
						               </div>
									      <div class="form-group"><label class="control-label">Contact Number</label>
						              <input value="{{restaurant.restaurant_owner_contact}}" name="owner_contactno" type="text" placeholder="Contact Number" class="form-control" title="Only numbers and cannot be more than 10 digits"> 
						               </div>
						               <div class="form-group"><label class="control-label">Email ID</label>
						             <input value="{{restaurant.restaurant_owner_email}}" name="owner_email" type="email" placeholder="Email ID" class="form-control"> 
						             
						               </div>
						               
						               <button class="btn btn-primary" type="submit">Save</button>&nbsp&nbsp																					
											<button data-dismiss="modal" class="btn btn-primary" type="submit">Cancel</button>	
						         </div>
											         
											     </div>
													</form>
        											</div>
        											<!-- <div class="modal-footer">
         											 <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        											</div> -->
      											</div>
      
    												</div>
  														</div>																									
        </div>
        
<div class="ibox-content">     
			                
          	<div class="modal fade" id="upload_image" role="dialog">
    						<div class="modal-dialog1">
          					<!-- Modal content-->	
      								<div class="modal-content">
        								<div class="modal-header">
								      	<button type="button" class="close" data-dismiss="modal">&times;</button>
          								<h4 class="modal-title">DealMonk</h4>
        								</div>
        								   
        							<!-- 	<form name="imageForm" id="uploadImageForm" method="post" enctype="multipart/form-data" action="/upload-admin-image/">  --> 	
        									<form name="imageForm" id="uploadImageForm" method="post" enctype="multipart/form-data">  										        								
											<div class="modal-body">           									
          									<div class="ibox-content">
							                    <div id='external-events'>
							                        <p id="delete_conformation_msg">Select Image.</p>
							                       <!--  <input name="image_load" type="file" class="form-control" id="exercisevideo"  accept=accept=".png, .jpg, .jpeg" /> -->
															 <input type="file" id='admin_image' name="pic" accept=".png, .jpg, .jpeg">	
															 <input type="hidden" id="login_user_name" name="user_name" value="{{request.session.login_user}}"></input>	
															 				                    
							                    </div>
							                </div>							             
        								</div>
        									  <div class="modal-footer">  
        										     <button type="button" id="btn_cancel_upload"  data-dismiss="modal" class="btn btn-primary">No</button>
        											  <button type="button" id="btn_ok_upload" data-dismiss="modal" class="btn btn-default" >Yes</button>
        										</div>
        							</form>
      								</div>
      								 
      						</div>
  					</div>
  			 
</div>        
        
        <div class="footer">

    <div>
        <strong>Copyright</strong> DealMonk &copy; 2015-2016
    </div>
</div>

        </div>
        </div>



    <!-- Mainly scripts -->
    <script src="{%static 'assets/js/jquery-2.1.1.js'%}"></script>
    <script src="{%static 'assets/js/bootstrap.js'%}"></script>
    <script src="{%static 'assets/js/plugins/metisMenu/jquery.metisMenu.js'%}"></script>
    <script src="{%static 'assets/js/plugins/slimscroll/jquery.slimscroll.min.js'%}"></script>
    <!-- Custom and plugin javascript -->
    <script src="{%static 'assets/js/inspinia.js'%}"></script>
    <script src="{%static 'assets/js/plugins/pace/pace.min.js'%}"></script>
     <script src="/static/assets/js/plugins/datapicker/bootstrap-datepicker.js"></script>
      <script src="/static/assets/js/jquery.timepicker.min.js"></script> 
     <script src="/static/js/date.js"></script>
     

    <!-- Peity -->
    <script src="{%static 'assets/js/plugins/peity/jquery.peity.min.js'%}"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
    <!-- Peity -->
    <script src="{%static 'assets/js/demo/peity-demo.js'%}"></script>
    <script src="{%static 'assets/js/bootstrap-multiselect.js'%}"></script>
    
    
<script type="text/javascript" >
$(document).ready(function(){

var x;
var rb_s;
var rb_c;

	 $('#select_cuisine').multiselect({
        includeSelectAllOption: true
    });
    
     $('#select_cuisine_rb').multiselect({
        includeSelectAllOption: true
    });

var data = $('#cuisine_result_id').text();
//alert(data);
//var data = 'Indian cuisine,Chinese Cuisine,Italian Cuisine';
        var valArr = data.split(",");
        var i = 0, size = valArr.length;
        for (i; i < size; i++) {
        		//alert(valArr[i].trim());
            $('#select_cuisine').multiselect('select',valArr[i].trim());
			}
			

	$('#branch_form').hide()
	if($('#hour-check').is(":checked"))
    $(".op-hours").prop('disabled', true);   
        //$("#").hide(500);
    else
        $(".op-hours").prop('disabled', false); 
        
    if($('#hour-check-rb').is(":checked"))
    $(".op-hours-rb").prop('disabled', true);   
        //$("#").hide(500);
    else
        $(".op-hours-rb").prop('disabled', false);    
});

function fact_link()
{	
	var city=$('#rest-city :selected').text();
	if(city){
	$.ajax({ 				          
            type : 'GET',
            url : '/map-state/',
            data : {'city': city },                              
 				success: function(data) {
 				if(data){ 					                                    
             document.getElementById('rest-state').value=data.state;
             }                                   
           },
           error: function(response){
           			alert("Error!");
           },        

        });
        }
        else{
        document.getElementById('rest-state').value="";
        }
}

function rb_fact_link()
{	
	var city=$('#rb-city :selected').text();
	if(city){
	$.ajax({ 				          
            type : 'GET',
            url : '/map-state/',
            data : {'city': city },                              
 				success: function(data) { 
 				if(data)
 				{					                                    
             document.getElementById('rb-state').value=data.state;
             }
                          
           },
           error: function(response){
           			alert("Error!");
           },        

        });
        }
    else{
    	document.getElementById('rb-state').value="";
    }
}

$('#branch_check').click(function () {
	var branch={{restaurant.restaurant_has_branch}};		
	if (branch==0) {
		alert('Your Restaurant does not have any branch. Please add a branch!');
		return false;		
	}
	else {			
			return true;		
	}
});

$('#branch_name').click(function () {

	var branch = $('#branch_name :selected').text();
	var id = $('#branch_name :selected').val();
	$.ajax({ 				          
            type : 'GET',
            url : '/get_branch_details/',
            data : {'branch_id': id },                              
 				success: function(response) {  	 							 
             $('#branch_id_form').val(response.branch_id);
             $('#branch_name_form').val(response.branch_name);
             $('#branch_cuisine').text(response.branch_cuisine);
             x = response.branch_cuisine;
             sel_cuisine(x);
             $('#branch_contact').val(response.branch_contact);            
             $('#branch_addr1').val(response.branch_addr1);
             $('#branch_addr2').val(response.branch_addr2);
             $('#branch_area').val(response.branch_area);
             $('#rb-city').val(response.branch_city);
             $('#rb-state').val(response.branch_state);
             $('#branch_pincode').val(response.branch_zipcode);
             $('#branch_form').show(500);
             $('#branch_lat').val(response.branch_lat);
             $('#branch_lng').val(response.branch_lat);
             $('#rb_day_from').val(response.rb_day_from);
             $('#rb_day_to').val(response.rb_day_to);
             $('#rb_eve_from').val(response.rb_eve_from);
             $('#rb_eve_to').val(response.rb_eve_to);
             rb_s = response.rb_day_from;
				 rb_c = response.rb_day_to;
					check_box(rb_s,rb_c);              
              return true;                    
           },
           error: function(response){
           			alert("Error!");
           },        

        });	

function check_box(rb_s,rb_c) {
if (rb_s == rb_c){
$('#hour-check-rb').attr('checked',true);
$(".op-hours").prop('disabled', true);
}
else {
$('#hour-check-rb').attr('checked',false);
$(".op-hours").prop('disabled', false);	
}
}

//alert(x);       
function sel_cuisine(x) {
var data = x;
//var data = 'Indian cuisine,Chinese Cuisine,Italian Cuisine';
        var valArr = data;
        var i = 0, size = valArr.length;
        for (i; i < size; i++) {
        		//alert(valArr[i].trim());
            $('#select_cuisine_rb').multiselect('select',valArr[i].trim());
			}	
}
        
});

/*function sel_cuisine() {
var data = $( "p" ).find( "span" ).text();
//var data = 'Indian cuisine,Chinese Cuisine,Italian Cuisine';
        var valArr = data.split(",");
        var i = 0, size = valArr.length;
        for (i; i < size; i++) {
        		//alert(valArr[i].trim());
            $('#select_cuisine_rb').multiselect('select',valArr[i].trim());
			}	
}*/

function valueChanged()
{
    if($('#hour-check').is(":checked"))
    $(".op-hours").prop('disabled', true);   
        //$("#").hide(500);
    else
        $(".op-hours").prop('disabled', false);    
}

function rb_valueChanged()
{
    if($('#hour-check-rb').is(":checked"))
    $(".op-hours").prop('disabled', true);   
        //$("#").hide(500);
    else
        $(".op-hours").prop('disabled', false);    
}


</script>
<script type="text/javascript" >

/*--------------------------------------------------------------*/
function validate(){
//alert('check me');
//return false;

console.log('validation');
//Restaurant validation
console.log("Restaurant timings-----------------------");
var rest_od = $('#rest_open_day :selected').text();
console.log(rest_od);
var rest_cd = $('#rest_close_day :selected').text();
console.log(rest_cd);
var rest_oe = $('#rest_open_eve :selected').text();
console.log(rest_oe);
var rest_ce = $('#rest_close_eve :selected').text();
console.log(rest_ce);
//alert(rest_od);
console.log("Restaurant parsed dates..................");
var rest_day_from = Date.parse(rest_od);
console.log(rest_day_from);
var rest_day_to = Date.parse(rest_cd);
console.log(rest_day_to);
var rest_eve_from = Date.parse(rest_oe);
console.log(rest_eve_from);
var rest_eve_to = Date.parse(rest_ce);
console.log(rest_eve_to);


//alert(rest_day_to);
//alert(rest_eve_from);
if(rest_day_from > rest_day_to){
	alert("Restaurant Day-Start time cannot be greater than End time!");
	return false;
	//$("#edit_restaurant").modal('show');
}
else if(rest_eve_from > rest_eve_to){
	alert("Restaurant Evening-Start time cannot be greater than End time!");
	return false;
	//$("#edit_restaurant").modal('show');
}
else if(rest_eve_from < rest_day_to){
	alert("Restaurant Evening-Start time cannot be less than Day-End time!");
	return false;
	//$("#edit_restaurant").modal('show');
}
else if(rest_eve_from == rest_eve_to){
	alert("Restaurant Evening-Start time cannot be same as End time!");
	return false;
	//$("#edit_restaurant").modal('show');
}
else if(rest_day_from == rest_day_to){
	alert("Restaurant Day-Start time cannot be same as End time!");
	return false;
	//$("#edit_restaurant").modal('show');
}
else if(rest_day_to == rest_eve_from){
	alert("Restaurant Day-End time cannot be same as Evening Start-time!");
	return false;
	//$("#edit_restaurant").modal('show');
}
else{
	return true;
}


};
/*------------------------------------------------------------------------*/
/*------------------------------------------------------------------------*/
/*------------------------------------------------------------------------*/

function validate_rb(){

var rb_od = $('#rb_day_from :selected').text();
console.log(rb_od);
var rb_cd = $('#rb_day_to :selected').text();
console.log(rb_cd);
var rb_oe = $('#rb_eve_from :selected').text();
console.log(rb_oe);
var rb_ce = $('#rb_eve_to :selected').text();
console.log(rb_ce);

var rb_day_from= Date.parse(rb_od);
console.log(rb_day_from);
var rb_day_to= Date.parse(rb_cd);
console.log(rb_day_to);
var rb_eve_from= Date.parse(rb_oe);
console.log(rb_eve_from);
var rb_eve_to= Date.parse(rb_ce);
console.log(rb_eve_to);

if(rb_day_from > rb_day_to){
	alert("Restaurant Branch Day-Start time cannot be greater than End time!");
	return false;	
	//$("#edit_restaurant_branch").modal('show');	
}
else if(rb_eve_from > rb_eve_to){
	alert("Restaurant Branch Evening-Start time cannot be greater than End time!");
	return false;	
	//$("#edit_restaurant_branch").modal('show');
}
else if(rb_day_from == rb_day_to){
	alert("Restaurant Branch Evening-Start time cannot be greater than End time!");
	return false;
	//$("#edit_restaurant_branch").modal('show');
}
else if(rb_eve_from == rb_eve_to){
	alert("Restaurant Branch Evening-Start time cannot be greater than End time!");
	return false;
	//$("#edit_restaurant_branch").modal('show');
}
else if(rb_eve_from < rb_day_to){
	alert("Restaurant Branch Evening-Start time cannot be greater than End time!");
	return false;
	//$("#edit_restaurant_branch").modal('show');
}
else{
	return true;
}
};


</script>

<script>
    var expanded = false;
    function showCheckboxes() {
        var checkboxes = document.getElementById("checkboxes");
        if (!expanded) {
            checkboxes.style.display = "block";
            expanded = true;
        } else {
            checkboxes.style.display = "none";
            expanded = false;
        }
    }
</script>

<script type="text/javascript">
/*------------------------------GMAP(REST)-------------------------------*/

$('#edit_rest').click(function () {
	$('#edit_restaurant').modal('show');
    validates();
    $('#rest-addr1,#rest-addr2, #rest-area, #rest-city, #rest-state,#rest-pincode').keyup(validates);
});


$('#edit_restaurant').on('click', function(evt) {
   // evt.stopPropagation();
   google.maps.event.trigger(map, 'resize');
   //alert('vikram singh chandel');
});



var geocoder = new google.maps.Geocoder();
var map;
var marker;
var infoWindow;
function geocodePosition(pos) {
  geocoder.geocode({
    latLng: pos
  }, function(responses) {
    if (responses && responses.length > 0) {
      updateMarkerAddress(responses[0].formatted_address);
    } else {
      updateMarkerAddress('Cannot determine address at this location.');
    }
  });
}

function updateMarkerStatus(str) {
  //document.getElementById('markerStatus').innerHTML = str;
}

function updateMarkerPosition(latLng) {

  $("#lat").val(latLng.lat());
  $("#lng").val(latLng.lng());
}

function updateMarkerAddress(str) {
  //document.getElementById('address').innerHTML = str;
  infoWindow.setContent(str);
}

function initialize() {
  var latLng = new google.maps.LatLng(-34.397, 150.644);
 map = new google.maps.Map(document.getElementById('mapCanvas'), {
    zoom: 8,
    //center: latLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
     infoWindow = new google.maps.InfoWindow({map: map});
     var latlngbounds = new google.maps.LatLngBounds();
  marker = new google.maps.Marker({
    position: latLng,
    title: 'Point A',
    map: map,
    draggable: true
  });
  google.maps.event.addListener(map, 'click', function (e) {
      $("#lat").val(e.latLng.lat());
      $("#lng").val(e.latLng.lng());

      placeMarker(e.latLng, map);
      infoWindow.open(map, this);
      map.setZoom(8);

          });
  // Try HTML5 geolocation.
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
        $("#lat").val( position.coords.latitude);
            $("#lng").val(position.coords.longitude);
      var pos = {
        lat: position.coords.latitude,
        lng: position.coords.longitude

      };

      infoWindow.setPosition(pos);
      infoWindow.setContent('You are here.');
      map.setCenter(pos);
      //placeMarker2(position,map);

    }, function() {
      handleLocationError(true, infoWindow, map.getCenter());
    });
  } else {
    // Browser doesn't support Geolocation
    handleLocationError(false, infoWindow, map.getCenter());
  }
  // Update current position info.
  //updateMarkerPosition(latLng);
  //geocodePosition(latLng);


  google.maps.event.addListener(marker, 'click', function() {
      geocodePosition(marker.getPosition());
        infoWindow.open(map, this);
        map.setZoom(8);
    });
  // Add dragging event listeners.
  google.maps.event.addListener(marker, 'dragstart', function() {
    //updateMarkerAddress('Dragging...');
  });

  google.maps.event.addListener(marker, 'drag', function() {
    //updateMarkerStatus('Dragging...');
    updateMarkerPosition(marker.getPosition());
  });

  google.maps.event.addListener(marker, 'dragend', function() {
    //updateMarkerStatus('Drag ended');
    geocodePosition(marker.getPosition());
    infoWindow.open(map, this);
    map.setZoom(8);
  });
}
function handleLocationError(browserHasGeolocation, infoWindow, pos) {
      infoWindow.setPosition(pos);
      infoWindow.setContent(browserHasGeolocation ?
                            'Error: The Geolocation service failed.' :
                            'Error: Your browser doesn\'t support geolocation.');
    }
function placeMarker(position, map) {
    if ( marker ) {
        marker.setPosition(position);
        geocodePosition(marker.getPosition());
      } else {
        marker = new google.maps.Marker({
          position: position,
          map: map,
         title: 'Drag Me!',
         draggable: true
        });
      }
    map.panTo(position);
  }
 /*function placeMarker2(position, map) {
    if ( marker ) {
        marker.setPosition(position);
        
      } else {
        marker = new google.maps.Marker({
          position: position,
          map: map,
         title: 'Drag Me!',
         draggable: true
        });
      }
    map.panTo(position);
  }*/

function codeAddress() {
//#rest-addr2, #rest-area, #rest-city, #rest-state,#rest-pincode
    var geocoder = new google.maps.Geocoder();
    var lat='';
    var lng='';
    var city_state_zip =$('#rest-city :selected').text()+", "+$("#rest-state").val()+", "+$("#rest-pincode").val();
    var street_address = $("#rest-addr1").val()+" "+$("#rest-addr2").val()+", "+$("#rest-area").val();
    var address = street_address + " " + city_state_zip;
    geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
       lat = results[0].geometry.location.lat(); //getting the lat
       lng = results[0].geometry.location.lng(); //getting the lng
       map.setCenter(results[0].geometry.location);

       placeMarker(results[0].geometry.location,map);
     } else {
            //alert("Geocode was not successful for the following reason: " + status);
            }
     });
     var latlng = new google.maps.LatLng(lat, lng);
     var myOptions = {
         zoom: 4,
         center: latlng,
         mapTypeId: google.maps.MapTypeId.ROADMAP
     }

 }

function validates(){
    if ($('#rest-addr1').val().length   > 0  && $('#rest-area').val().length   >   0   &&
        $('#rest-city :selected').text().length  >   0   &&
        $('#rest-state').val().length    >   0 && $('#rest-pincode').val().length    >   0) {
        codeAddress();
        
    }

}
function GetAddress() {
    var lat = parseFloat();
    var lng = parseFloat(document.getElementById("txtLongitude").value);

    var latlng = new google.maps.LatLng(lat, lng);
    geocoder.geocode({ 'latLng': latlng }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            if (results[1]) {

                infoWindow.setContent(str);
            }
        }
    });
}
// Onload handler to fire off the app.
google.maps.event.addDomListener(window, 'load', initialize);


/*------------------------------GMAP_END------------------------------------*/

</script>

<script type="text/javascript" >
$('#user_img').click(function(){
	$('#upload_image').modal('show');
});

$('#btn_ok_upload').click(function(){

  var input = document.getElementById("admin_image");  	  
    file = input.files[0];
	 var formData= new FormData();  
  	 if(file != undefined){ 	 
    	if(!!file.type.match(/image.*/)){
      	formData.append("image", file);    
      	formData.append("user_name",$('#login_user_name').val());      	
      	$.ajax({
    			type : 'POST',
    			url : '/upload-admin-image/',
    			data : formData,
    			cache: false,
    			processData: false,
    			contentType: false,
    			success: function(response) {
    				console.log(response);
        			if(response.success=='true'){
        				$('#user_img').attr('src',response.image);
        			}
        			if(response.success=='error'){
        				alert('error!')
        			}
    			},
    			error: function(response){
            console.log(response);
           			alert("ajax Error!");
           }, 
		});
    }else{
      alert('Not a valid image!');
    }
  }else{
    //alert('Input something!');
  } 
});
</script>

</body>

</html>
